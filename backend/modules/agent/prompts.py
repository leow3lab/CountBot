"""Agent Prompts - 提示词模板"""

# 对话总结 → 记忆条目提示词
# 让 LLM 直接把对话总结为一行记忆格式
CONVERSATION_TO_MEMORY_PROMPT = """你是一个对话总结器。将下面的对话总结为简洁的记忆条目。

要求:
1. 输出格式: 一行文本，多个事项用中文分号（；）分隔
2. 只记录有长期价值的事实信息:
   - 用户明确表达的偏好和习惯
   - 重要决策和结论
   - 项目配置和技术细节
   - 用户要求记住的内容
3. 不要记录:
   - 寒暄、确认、重复内容
   - 一次性查询结果（天气、新闻、搜索结果）
   - 工具执行的中间过程
   - 闲聊和测试内容
4. 每个事项必须包含具体信息（名称、数字、时间、地点等）
5. 如果对话没有值得长期记录的信息，输出: 无需记录

对话内容:
{messages}

输出（一行，事项用；分隔）:"""


# 递归总结提示词（用于更新已有总结）
RECURSIVE_SUMMARY_PROMPT = """你是一个对话总结器。将新的对话内容合并到已有总结中。

已有总结:
{previous_summary}

新对话:
{past_messages}

要求:
1. 合并新信息到已有总结
2. 去除过时或重复的内容
3. 保持简洁，不超过 {char_limit} 字符
4. 输出纯文本，不要 markdown 格式

更新后的总结:"""


# 记忆条目模板（写入 MEMORY.md 的格式）
MEMORY_ENTRY_TEMPLATE = "{date}|{source}|{content}"


# 上下文溢出总结提示词（滚动窗口截断前，将旧消息写入记忆）
OVERFLOW_SUMMARY_PROMPT = """你是一个对话总结器。以下是一段即将被截断的旧对话历史，请将其中有长期价值的信息总结为简洁的记忆条目。

要求:
1. 输出格式: 一行文本，多个事项用中文分号（；）分隔
2. 只记录有长期价值的事实信息:
   - 用户明确表达的偏好和习惯
   - 重要决策和结论
   - 项目配置和技术细节
   - 工具调用的关键结果（非临时查询）
3. 不要记录:
   - 寒暄、确认、重复内容
   - 一次性查询结果（天气、新闻、搜索结果）
   - 工具执行的中间过程和临时数据
4. 每个事项必须包含具体信息（名称、数字、时间、地点等）
5. 如果对话没有值得长期记录的信息，输出: 无需记录

对话内容:
{messages}

输出（一行，事项用；分隔）:"""


# Heartbeat 问候提示词
HEARTBEAT_GREETING_PROMPT = """你是用户的AI助手"{ai_name}"。现在是{time_desc}，用户"{user_name}"已经有{idle_hours}小时没有和你对话了。

{user_context}

你的性格特点:
{personality_desc}

请生成一条简短、自然、温暖的问候消息，主动关心用户。

要求:
1. 根据时间段调整语气（早上活力、下午轻松、晚上温馨）
2. 体现你的性格特点，但不要太正式，像朋友一样自然
3. 可以适当结合天气、时间等话题
4. 如果有用户地址信息，可以自然地提及当地相关话题
5. 控制在50字以内
6. 不要用emoji
7. 不要说"有什么可以帮你的"这类客服话术
8. 可以称呼用户的名字，让问候更亲切

{memory_context}

输出问候语:"""
